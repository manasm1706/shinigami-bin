# TypeScript Types Generator Template

This template is used by the `generate-message-types` hook to auto-generate TypeScript types from app-spec.yaml.

## Instructions

When this hook triggers, generate a TypeScript types file at `frontend/src/types/generated.ts` that includes:

### 1. Message Types (from messaging module)

Based on the messaging API contract:
- `GET /api/messages?realm={realm}` response
- `POST /api/messages` request/response

Generate:
```typescript
export interface Message {
  id: string;
  sender: string;
  text: string;
  realm: string;
  timestamp: string;
}

export interface GetMessagesResponse {
  realm: string;
  count: number;
  messages: Message[];
}

export interface SendMessageRequest {
  sender: string;
  text: string;
  realm: string;
}

export interface SendMessageResponse {
  success: boolean;
  message: Message;
}
```

### 2. Fortune Types (from fortunes module)

Based on the fortune API contract:
- `GET /api/fortune/daily?username={username}` response

Generate:
```typescript
export type FortuneSeverity = 'low' | 'medium' | 'high';

export interface Fortune {
  username: string;
  fortune: string;
  severity: FortuneSeverity;
  timestamp: string;
}

export interface GetFortuneResponse extends Fortune {}
```

### 3. Realm Types (from messaging module)

Generate:
```typescript
export type RealmId = 'living' | 'beyond' | 'unknown';

export interface Realm {
  id: RealmId;
  name: string;
  description: string;
}
```

### 4. Common Types

Generate:
```typescript
export interface ApiError {
  error: string;
  details?: string[];
}

export interface HealthCheckResponse {
  status: string;
  service: string;
  timestamp: string;
}
```

## File Header

Include this header in the generated file:

```typescript
/**
 * AUTO-GENERATED TypeScript Types
 * 
 * Generated from: .kiro/specs/app-spec.yaml
 * Generated at: {current_timestamp}
 * 
 * DO NOT EDIT THIS FILE MANUALLY
 * Changes should be made to app-spec.yaml and regenerated via the hook
 */
```

## Generation Rules

1. **Parse app-spec.yaml**: Read the modules section and extract API contracts
2. **Map API to Types**: Convert API request/response schemas to TypeScript interfaces
3. **Use Enums**: Convert fixed value lists (like severity levels) to union types
4. **Add JSDoc**: Include documentation comments for each type
5. **Export All**: Ensure all types are exported for use across the application
6. **Validate**: Check that generated types match existing usage in components

## Example Full Generated File

```typescript
/**
 * AUTO-GENERATED TypeScript Types
 * 
 * Generated from: .kiro/specs/app-spec.yaml
 * Generated at: 2025-12-05T10:30:00.000Z
 * 
 * DO NOT EDIT THIS FILE MANUALLY
 * Changes should be made to app-spec.yaml and regenerated via the hook
 */

// ============================================================================
// Messaging Module Types
// ============================================================================

/**
 * Message object representing a chat message in a realm
 */
export interface Message {
  id: string;
  sender: string;
  text: string;
  realm: string;
  timestamp: string;
}

/**
 * Response from GET /api/messages
 */
export interface GetMessagesResponse {
  realm: string;
  count: number;
  messages: Message[];
}

/**
 * Request body for POST /api/messages
 */
export interface SendMessageRequest {
  sender: string;
  text: string;
  realm: string;
}

/**
 * Response from POST /api/messages
 */
export interface SendMessageResponse {
  success: boolean;
  message: Message;
}

// ============================================================================
// Fortune Module Types
// ============================================================================

/**
 * Fortune severity levels
 * - low: Mild, mysterious fortunes (WHISPER)
 * - medium: Moderate, intriguing predictions (WARNING)
 * - high: Intense, ominous warnings (OMEN)
 */
export type FortuneSeverity = 'low' | 'medium' | 'high';

/**
 * Fortune object representing a daily prediction
 */
export interface Fortune {
  username: string;
  fortune: string;
  severity: FortuneSeverity;
  timestamp: string;
}

/**
 * Response from GET /api/fortune/daily
 */
export interface GetFortuneResponse extends Fortune {}

// ============================================================================
// Realm Types
// ============================================================================

/**
 * Valid realm identifiers
 */
export type RealmId = 'living' | 'beyond' | 'unknown';

/**
 * Realm object representing a chat realm
 */
export interface Realm {
  id: RealmId;
  name: string;
  description: string;
}

// ============================================================================
// Common API Types
// ============================================================================

/**
 * Standard API error response
 */
export interface ApiError {
  error: string;
  details?: string[];
}

/**
 * Response from GET /api/health
 */
export interface HealthCheckResponse {
  status: string;
  service: string;
  timestamp: string;
}
```

## Post-Generation Steps

After generating the types file:

1. Update imports in existing files to use the generated types
2. Remove duplicate type definitions from service files
3. Run TypeScript compiler to verify no type errors
4. Notify user of successful generation with file path
